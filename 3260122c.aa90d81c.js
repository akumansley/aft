(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{74:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return p}));var r=n(3),a=n(7),o=(n(0),n(94)),i={id:"login",title:"Login"},l={unversionedId:"tutorial/login",id:"tutorial/login",isDocsHomePage:!1,title:"Login",description:"First, let's create a store for tracking the signed in user.",source:"@site/docs/tutorial/login.md",slug:"/tutorial/login",permalink:"/aft/tutorial/login",version:"current",sidebar:"main",previous:{title:"App setup",permalink:"/aft/tutorial/app-setup"},next:{title:"User",permalink:"/aft/tutorial/user"}},s=[{value:"Adding a user",id:"adding-a-user",children:[]}],c={toc:s};function p(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"First, let's create a store for tracking the signed in user."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js",metastring:'title="store.js"',title:'"store.js"'}),"export const userStore = Vue.reactive({value: null})\n")),Object(o.b)("p",null,"We'll start off by building our small login widget in a new file, ",Object(o.b)("inlineCode",{parentName:"p"},"login.js"),"."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js",metastring:'title="login.js"',title:'"login.js"'}),'import {api} from \'./api.js\'\nimport {userStore} from \'./store.js\'\n\nexport const Login = {\n    data() {\n        return {\n            email: "",\n            password: "",\n            errorMessage: null,\n        }\n    },\n    methods: {\n        async login() {\n            this.errorMessage = null;\n            try {\n                userStore.value = await api.login(this.email, this.password)\n            } catch (err) {\n                this.errorMessage = err.message;\n            }\n        }\n    },\n    template: `\n    <div class="card card-body" style="width: 20rem;">\n        <div class="form-group">\n            <label>Email</label>\n            <input class="form-control" v-model=email type="email" />\n        </div>\n        <div class="form-group">\n            <label>Password</label>\n            <input class="form-control" v-model=password type="password"/>\n        </div>\n        <div v-if="errorMessage" class="alert alert-danger">{{errorMessage}}</div>\n        <button @click="login" class="btn btn-primary">Login</button>\n    </div>\n    `,\n}\n')),Object(o.b)("p",null,"It's not wired up to anything yet, so let's go add it to ",Object(o.b)("inlineCode",{parentName:"p"},"app.js"),', replacing our "hello" message.'),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js",metastring:'title="app.js"',title:'"app.js"'}),"import {Login} from './login.js'\n\nconst App = {\n    components: {\n        'login-view': Login,\n    },\n    template: `\n    <login-view />\n    `,\n}\n\nexport const app = Vue.createApp(App)\n")),Object(o.b)("h2",{id:"adding-a-user"},"Adding a user"),Object(o.b)("p",null,"If you go ahead and try to sign in to our tutorial app, you should of course get an error about the login not working\u2014we haven't added any users yet!"),Object(o.b)("p",null,"Open up Aft, and navigate to the ",Object(o.b)("strong",{parentName:"p"},"Terminal"),", and we'll create a user."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-python"}),'def main(aft):\n    return aft.api.create("user", {"data":{"email":"user@example.com", "password":"coolpass"}})\n')),Object(o.b)("p",null,"Press ",Object(o.b)("strong",{parentName:"p"},"Run"),", and you should see a JSON representation of the user just created, though the password is salted and hashed. "),Object(o.b)("p",null,"Go back to the tutorial app, and try signing in with your new credentials. If you open DevTools, you should see a user object in the result of the ",Object(o.b)("inlineCode",{parentName:"p"},"console.log")," statement."),Object(o.b)("p",null,"In the next section, we'll finish up the login system, using the ",Object(o.b)("inlineCode",{parentName:"p"},"me")," RPC."))}p.isMDXComponent=!0},94:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return g}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=a.a.createContext({}),p=function(e){var t=a.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=p(e.components);return a.a.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},b=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(n),b=r,g=u["".concat(i,".").concat(b)]||u[b]||d[b]||o;return n?a.a.createElement(g,l(l({ref:t},c),{},{components:n})):a.a.createElement(g,l({ref:t},c))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=b;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);