(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{63:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return p})),n.d(t,"metadata",(function(){return i})),n.d(t,"toc",(function(){return l})),n.d(t,"default",(function(){return s}));var r=n(3),a=n(7),o=(n(0),n(94)),p={id:"app-setup",title:"App setup"},i={unversionedId:"tutorial/app-setup",id:"tutorial/app-setup",isDocsHomePage:!1,title:"App setup",description:"First, let's make a new file, app.js, and create a root component for our app.",source:"@site/docs/tutorial/app-setup.md",slug:"/tutorial/app-setup",permalink:"/aft/tutorial/app-setup",version:"current",sidebar:"main",previous:{title:"Frontend Setup",permalink:"/aft/tutorial/frontend-setup"},next:{title:"Login",permalink:"/aft/tutorial/login"}},l=[{value:"API client",id:"api-client",children:[]}],c={toc:l};function s(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"First, let's make a new file, ",Object(o.b)("inlineCode",{parentName:"p"},"app.js"),", and create a root component for our app."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js",metastring:'title="app.js"',title:'"app.js"'}),"const App = {\n    template: `\n    <div>Hello App!</div>\n    `,\n}\n\nexport const app = Vue.createApp(App)\n")),Object(o.b)("p",null,"And then let's bootstrap it in our ",Object(o.b)("inlineCode",{parentName:"p"},"index.html")," file:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-html",metastring:'title="index.html"',title:'"index.html"'}),"<script type=module>\n    import {app} from './app.js';\n    window.onload = () => {\n        app.mount(\"#app\");\n    }\n<\/script>\n")),Object(o.b)("p",null,"Hit refresh on the client\u2014you should see your app rendering its greeting."),Object(o.b)("p",null,"We're using JS modules to keep our code clean and separated, which is lovely, but it's worth noting that modules are only supported in modern browsers. "),Object(o.b)("h2",{id:"api-client"},"API client"),Object(o.b)("p",null,"Now we'll add a small API client\u2014some objects that will make it easy for us to talk to Aft."),Object(o.b)("p",null,"Make a new file, ",Object(o.b)("inlineCode",{parentName:"p"},"api.js"),":"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js",metastring:'title="api.js"',title:'"api.js"'}),"export class APIError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = \"APIError\"; \n    }\n}\n\nasync function makeRPC(name, args) {\n    try {\n        const result = await fetch('/rpc/' + name, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({args: args}),\n        })\n        const response = await result.json();\n        if (response.code) {\n            // server error\n            throw new APIError(response.message);\n        }\n        return response.data;\n    } catch (e) {\n        // client error\n        throw new APIError(e.message);\n    }\n}\n")),Object(o.b)("p",null,"The function ",Object(o.b)("inlineCode",{parentName:"p"},"makeRPC"),' is a helper function that handles the "transport" aspect of talking to Aft, and armed with it, we can make local methods for the first two RPCs we\'re going to use: ',Object(o.b)("inlineCode",{parentName:"p"},"me")," and ",Object(o.b)("inlineCode",{parentName:"p"},"login"),"."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js",metastring:'title="api.js"',title:'"api.js"'}),"export const api = {\n    async me() {\n        return makeRPC('me', {})\n    },\n    async login(email, password) {\n        return makeRPC('login', {\n            email: email,\n            password: password,\n        })\n    },\n}\n")),Object(o.b)("p",null,"Okay, nice work! Up next, we'll make our login UI and sign in to our app."))}s.isMDXComponent=!0},94:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=a.a.createContext({}),s=function(e){var t=a.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=s(e.components);return a.a.createElement(c.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},b=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=s(n),b=r,d=u["".concat(p,".").concat(b)]||u[b]||m[b]||o;return n?a.a.createElement(d,i(i({ref:t},c),{},{components:n})):a.a.createElement(d,i({ref:t},c))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,p=new Array(o);p[0]=b;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,p[1]=i;for(var c=2;c<o;c++)p[c]=n[c];return a.a.createElement.apply(null,p)}return a.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);