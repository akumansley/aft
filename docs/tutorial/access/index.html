<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.ef49c2be7">
<title data-react-helmet="true">Access | Aft</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Access | Aft"><meta data-react-helmet="true" name="description" content="Open up Aft and navigate to the Access section."><meta data-react-helmet="true" property="og:description" content="Open up Aft and navigate to the Access section."><meta data-react-helmet="true" property="og:url" content="  https://aft.dev/docs/tutorial/access"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.svg"><link data-react-helmet="true" rel="canonical" href="https://aft.dev/docs/tutorial/access"><link rel="stylesheet" href="/styles.a9e0a5b7.css">
<link rel="preload" href="/styles.c34d1984.js" as="script">
<link rel="preload" href="/runtime~main.d66cf3bc.js" as="script">
<link rel="preload" href="/main.51c959ce.js" as="script">
<link rel="preload" href="/1.b2eacf43.js" as="script">
<link rel="preload" href="/26.f69bbb55.js" as="script">
<link rel="preload" href="/27.08144590.js" as="script">
<link rel="preload" href="/935f2afb.03309c1d.js" as="script">
<link rel="preload" href="/25.3a0da407.js" as="script">
<link rel="preload" href="/104017d7.57cf589f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/favicon.svg" alt="Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/favicon.svg" alt="Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Aft</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/awans/aft" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/favicon.svg" alt="Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/favicon.svg" alt="Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Aft</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs">Docs</a></li><li class="menu__list-item"><a href="https://github.com/awans/aft" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">About</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Tutorial</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/running">Running Aft</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/frontend-setup">Frontend Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/app-setup">App Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/login">Login</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/user">User</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/models">Models</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/creates">Creating</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/updates">Updating</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/tutorial/access">Access</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/review">Review</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview/schema">Schema</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview/api">API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview/rpcs">RPCs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview/access">Access</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview/identity">Identity</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview/records">Records</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview/internals">Internals</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Access</h1></header><div class="markdown"><p>Open up Aft and navigate to the <strong>Access</strong> section.</p><p>Click on the role labeled <strong>User</strong>.</p><p>This is the default role for a signed in user, though of course you can change that to suit your application&#x27;s needs. Starting out, the User role is granted access to some of the login methods, the API methods, and to read and update their own user object.</p><p>You should see an <strong>Add</strong> button under Models. Click that, and select <code>Todo</code> from the dropdown.</p><p>This grants access to all Todos to the user role, which is too broad.</p><p>Click <strong>Detail</strong> to expand the policy editor. You should see three sections, labeled Read Create and Update.</p><p>Under each, add the following policy.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;user&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;id&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;$USER_ID&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This indicates that a user can create, read or update only their own Todos.</p><p>Hit <strong>Save</strong> to update the permissions for this role.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="roles"></a>Roles<a class="hash-link" href="#roles" title="Direct link to heading">#</a></h2><p>Let&#x27;s connect our test user with the role we just created. Ordinarily this connection would be done by the Signup RPC, but since we created this user by ourselves in the terminal, we&#x27;ll just do it by hand.</p><p>Start by going to the <strong>Terminal</strong> and run the following <code>update</code> statement.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-python codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> update</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;user&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;where&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;email&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;user@example.com&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;data&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;role&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;connect&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;name&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;user&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Restart Aft as before, but this time with access controls enabled.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">aft -db ./tutorial.dbl -authed</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">true -serve_dir</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">client</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>If you open up Aft, you&#x27;ll notice that no data is displayed, since we don&#x27;t have access rights to read the schema or other Aft resources. But test out the Todo app, and you should see that everything works!</p><p><strong>Congrats on building your first app with Aft!</strong></p><p>In the last section, we&#x27;ll review what we&#x27;ve gone over in this tutorial.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/tutorial/updates"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Updating</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/tutorial/review"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Review »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#roles" class="table-of-contents__link">Roles</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/styles.c34d1984.js"></script>
<script src="/runtime~main.d66cf3bc.js"></script>
<script src="/main.51c959ce.js"></script>
<script src="/1.b2eacf43.js"></script>
<script src="/26.f69bbb55.js"></script>
<script src="/27.08144590.js"></script>
<script src="/935f2afb.03309c1d.js"></script>
<script src="/25.3a0da407.js"></script>
<script src="/104017d7.57cf589f.js"></script>
</body>
</html>